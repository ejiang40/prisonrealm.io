<!DOCTYPE html>
<html>
  <head>
    <title>Prison Realm</title>
    <meta name="Aframe Scene" content="Prison Realm" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img
          id="groundTexture"
          src="https://cdn.aframe.io/a-painter/images/floor.jpg"
        />
        
    <script>
      AFRAME.registerComponent('random-eyes', {
        schema: {
          numberOfEyes: {type: 'number', default: 100},
          eyeScale: {type: 'vec3', default: {x: 0.05, y: 0.05, z: 0.05}}
        },
        init: function () {
          var data = this.data;
          var el = this.el;
          var boxScale = el.getAttribute('scale');

          for (var i = 0; i < data.numberOfEyes; i++) {
            var eye = document.createElement('a-sphere');
            eye.setAttribute('src', '#eyeTexture');
            eye.setAttribute('scale', data.eyeScale);
            eye.setAttribute('material', {
              color: '#ffffff',
              emissive: '#ffffff',
              emissiveIntensity: 0.5,
              shader: 'flat'
            });
            // Random position on the surface of the box
            var side = Math.floor(Math.random() * 6);
            var pos = new THREE.Vector3(
              (Math.random() - 0.5) * 2,
              (Math.random() - 0.5) * 2,
              (Math.random() - 0.5) * 2
            );
            pos.normalize();
            
            // Adjust position to account for box scale
            pos.x *= boxScale.x / 4.3;
            pos.y *= boxScale.y / 4.3;
            pos.z *= boxScale.z / 4.3;

            // Slightly outside the box to prevent z-fighting
            pos.multiplyScalar(1.01);

            eye.setAttribute('position', pos);

            // Rotate the eye to face outward
            eye.setAttribute('look-at', '3 6 9');

            el.appendChild(eye);
          }
        }
      });
      </script>



        <img id="fleshTexture" src="flesh.jpg">
        <img id="skytexture" src="skulls.PNG">
        <img id="eyeTexture" src="eye.jpg">
      </a-assets>

      <a-text
        font= "dejavu"
        value="The Strongest sorcerer, Satoru Gojo, trapped inside the prison realm..."
        position="-1.5 7 -5"
        color="#9c4848"
        scale="1.5 1.5 1.5"
      ></a-text>
      <a-text
        font= "dejavu"
        value="...helpless to stop the madness in Shibuya."
        position="-1.5 6.5 -5"
        color="#9c4848"
      ></a-text>

      <a-box
        src = "#fleshTexture"
        material="color: #808080"
        position= "0 3 -5"
        rotation= "20 90 30"
        scale= "3 3 3"
        random-eyes="numberOfEyes: 30; eyeScale: 0.05 0.05 0.05"
      >
      </a-box>
      


      <a-entity laser-controls="hand: left"></a-entity>
      <a-entity laser-controls="hand: right"></a-entity>

      <a-sky id="bg" color="#fff"></a-sky>
      <a-sky src="#skytexture"></a-sky>
      <a-light color="red" position="0 0 0"></a-light>
      <a-light type="ambient" color="red"></a-light>

      <a-plane
        src="#groundTexture"
        material ="color: #808080"
        rotation="-90 0 0"
        width="50"
        height="50"
      ></a-plane>

      <a-camera>
        <a-cursor></a-cursor>
      </a-camera>
    </a-scene>
  </body>
</html>
